{
  "handler": "Microsoft.Compute.MultiVm",
  "version": "0.1.2",
  "parameters": {
    "basics": [
    ],
    "steps": [
      {
        "label": "Informatica Domain Settings",
        "name": "infaDomainConfiguration",
        "subLabel": {
          "preValidation": "Configure domain settings",
          "postValidation": "Done"
        },
        "bladeTitle": "Informatica 10.2.0 Settings",
        "elements": [
          {
            "name": "infaVersion",
            "type": "Microsoft.Common.TextBox",
            "label": "Informatica EIC version",
            "defaultValue": "10.2.0",
            "toolTip": "Informatica Enterpise Information Catalog version.",
            "constraints": {
              "required": true
            },
            "visible": false
          },
          {
            "name": "infaDomainName",
            "type": "Microsoft.Common.TextBox",
            "label": "Informatica Domain Name",
            "defaultValue": "Domain",
            "toolTip": "Specify a name for Informatica domain.",
            "constraints": {
              "required": true,
              "regex": "^[a-z0-9A-Z_]{3,30}$",
              "validationMessage": "Only alphanumeric characters and underscore are allowed. The value must be 3-30 characters long."
            }
          },
          {
            "name": "infaDomainUser",
            "type": "Microsoft.Common.TextBox",
            "label": "Informatica Domain Administrator Name",
            "defaultValue": "Administrator",
            "toolTip": "Specify name for Informatica domain administrator user.",
            "constraints": {
              "required": true,
              "regex": "^[a-z0-9A-Z_]{3,30}$",
              "validationMessage": "Only alphanumeric characters and underscore are allowed. The value must be 3-30 character long."
            }
          },
          {
            "name": "infaDomainPassword",
            "type": "Microsoft.Common.PasswordBox",
            "label": {
              "password": "Informatica Domain Password",
              "confirmPassword": "Confirm Informatica Domain Password"
            },
            "constraints": {
              "required": true,
              "regex": "^(?=.*[A-Z])(?=.*[a-z])(?=.*\\d)(?=.*[^\\s\\w])(?!.*[\"$]).{8,123}$",
              "validationMessage": "Password must be at least 8 characters in length. Should contain at least one special character, number, upper-case and lower-case character. Double quote(\") and dollar($) are not allowed."
            },
            "options": {
              "hideConfirmation": false
            }
          },
          {
            "name": "infaDomainEncryptionKeyword",
            "type": "Microsoft.Common.PasswordBox",
            "toolTip": "Keyphrase for generating encryption key for Informatica domain.",
            "label": {
              "password": "Keyphrase For Encryption Key",
              "confirmPassword": "Confirm Keyphrase For Encryption Key"
            },
            "constraints": {
              "required": true,
              "regex": "^(?=.*[A-Z])(?=.*[a-z])(?=.*\\d)(?=.*[^\\s\\w])(?!.*[\"$]).{8,20}$",
              "validationMessage": "Keyphrase must be at least 8 characters in length. Should contain at least one special character, number, upper-case and lower-case character. Double quote(\") and dollar($) is not allowed"
            },
            "options": {
              "hideConfirmation": true
            }
          },
          {
            "name": "infaDomainLicense",
            "type": "Microsoft.Common.FileUpload",
            "label": "Informatica License File",
            "toolTip": "Provide a valid Informatica License key file.",
            "constraints": {
              "required": true,
              "accept": ".key"
            },
            "options": {
              "multiple": false,
              "uploadMode": "url",
              "openMode": "text",
              "encoding": "UTF-8"
            },
            "visible": true
          }
        ]
      }
    ],
    "outputs": {
      "location": "[location()]",
      "infaDomainName": "[steps('infaDomainConfiguration').infaDomainName]",
      "infaDomainUser": "[steps('infaDomainConfiguration').infaDomainUser]",
      "infaDomainPassword": "[steps('infaDomainConfiguration').infaDomainPassword]",
      "infaDomainEncryptionKeyword": "[steps('infaDomainConfiguration').infaDomainEncryptionKeyword]",
      "infaDomainLicense": "[steps('infaDomainConfiguration').infaDomainLicense]"
    }
  }
}
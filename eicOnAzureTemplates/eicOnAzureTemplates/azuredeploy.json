{
  "$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
  "contentVersion": "1.0.0.0",
  "parameters": {
    "clusterName": {
      "type": "String",
      "metadata": {
        "description": "The name of the HDInsight cluster to create."
      }
    },
    "clusterLoginUserName": {
      "defaultValue": "admin",
      "type": "String",
      "metadata": {
        "description": "These credentials can be used to submit jobs to the cluster and to log into cluster dashboards."
      }
    },
    "clusterLoginPassword": {
      "type": "SecureString",
      "metadata": {
        "description": "The password must be at least 10 characters in length and must contain at least one digit, one non-alphanumeric character, and one upper or lower case letter."
      }
    },
    "sshUserName": {
      "defaultValue": "sshuser",
      "type": "String",
      "metadata": {
        "description": "These credentials can be used to remotely access the cluster."
      }
    },
    "sshPassword": {
      "type": "SecureString",
      "metadata": {
        "description": "The password must be at least 10 characters in length and must contain at least one digit, one non-alphanumeric character, and one upper or lower case letter."
      }
    },
    "clusterLocation": {
      "defaultValue": "Southeast Asia",
      "allowedValues": [
        "East US",
        "East US 2",
        "North Central US",
        "South Central US",
        "West US",
        "North Europe",
        "West Europe",
        "East Asia",
        "Southeast Asia",
        "Japan East",
        "Japan West",
        "Australia East",
        "Australia Southeast"
      ],
      "type": "String",
      "metadata": {
        "description": "The location where all azure resources will be deployed."
      }
    },
    "clusterType": {
      "defaultValue": "hadoop",
      "allowedValues": [
        "hadoop",
        "hbase",
        "storm",
        "spark"
      ],
      "type": "String",
      "metadata": {
        "description": "The type of the HDInsight cluster to create."
      }
    },
    "clusterHeadNodeCount": {
      "defaultValue": 2,
      "type": "Int",
      "metadata": {
        "description": "The number of head nodes in the HDInsight cluster."
      }
    },
    "clusterHeadNodeVmType": {
      "defaultValue": "Standard_D3",
      "type": "String",
      "metadata": {
        "description": "The SKU for head nodes VMs."
      }
    },
    "clusterWorkerNodeCount": {
      "defaultValue": 2,
      "type": "Int",
      "metadata": {
        "description": "The number of nodes in the HDInsight cluster."
      }
    },
    "clusterWorkerNodeVmType": {
      "defaultValue": "Standard_D3",
      "type": "String",
      "metadata": {
        "description": "The SKU for worker nodes VMs."
      }
    },
    "clusterHdinsightVersion": {
      "defaultValue": "3.5",
      "type": "String",
      "metadata": {
        "description": "The HDInsight cluster version."
      }
    },
    "clusterStorageType": {
      "defaultValue": "Standard_LRS",
      "type": "String",
      "metadata": {
        "description": "The SKU for cluster storage."
      }
    }
  },
  "variables": {
    "baseUrl": "https://raw.githubusercontent.com/robsharm/gitrepo/master/eicOnAzureTemplates/eicOnAzureTemplates/",
    "clusterDeployTemplateUri": "[concat(variables('baseUrl'), 'clusterdeploy.json')]"
  },
  "resources": [
    {
      "name": "clusterDeploySetup",
      "type": "Microsoft.Resources/deployments",
      "apiVersion": "2015-01-01",
      "properties": {
        "mode": "Incremental",
        "templateLink": {
          "uri": "[variables('clusterDeployTemplateUri')]",
          "contentVersion": "1.0.0.0"
        },

        "parameters": {
          "baseUrl": {
            "value": "[variables('baseUrl')]"
          },
          "clusterHdinsightVersion": {
            "value": "[parameters('clusterHdinsightVersion')]"
          },
          "clusterName": {
            "value": "[parameters('clusterName')]"
          },
          "clusterLoginUserName": {
            "value": "[parameters('clusterLoginUserName')]"
          },
          "clusterLoginPassword": {
            "value": "[parameters('clusterLoginPassword')]"
          },
          "sshUserName": {
            "value": "[parameters('sshPassword')]"
          },
          "sshPassword": {
            "value": "[parameters('sshPassword')]"
          },
          "clusterLocation": {
            "value": "[parameters('clusterLocation')]"
          },
          "clusterType": {
            "value": "[parameters('clusterType')]"
          },
          "clusterHeadNodeCount": {
            "value": "[parameters('clusterHeadNodeCount')]"
          },
          "clusterHeadNodeVmType": {
            "value": "[parameters('clusterHeadNodeVmType')]"
          },
          "clusterWorkerNodeCount": {
            "value": "[parameters('clusterWorkerNodeCount')]"
          },
          "clusterWorkerNodeVmtype": {
            "value": "[parameters('clusterWorkerNodeVmtype')]"
          },
          "clusterStorageType": {
            "value": "[parameters('clusterStorageType')]"
          }
        }
      }
    }
  ],
  "outputs": {}
}
